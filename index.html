<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>File Upload to Github</title>
    <script src="https://unpkg.com/leancloud-storage@4.15.2/dist/av-min.js"></script>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 20px;
        text-align: center;
      }

      h1 {
        color: #333;
      }

      .upload-container {
        margin-top: 30px;
        padding: 20px;
      }

      .custom-file-upload {
        display: inline-block;
        padding: 12px 24px;
        cursor: pointer;
        border-radius: 4px;
        background-color: #5cb85c;
        color: white;
        border: 1px solid transparent;
        transition: all 0.3s ease-in-out;
      }

      .custom-file-upload:hover {
        background-color: #4cae4c;
      }

      #file-input {
        display: none; /* Hide the default file input */
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .upload-container {
          padding: 15px;
        }
        .custom-file-upload {
          padding: 10px 20px; /* Slightly smaller padding on mobile */
        }
      }
    </style>
    <script>
      // 初始化 LeanCloud 应用
      AV.init({
        appId: "f2b0Nh5pSJzstBiy3p0iajM2-gzGzoHsz", // 替换为你的 App ID
        appKey: "MY0v9ZfgAOf5VZGgBP4eiG6e", // 替换为你的 App Key
        serverURL: "https://cn-n1-console-api.leancloud.cn", // 替换为你的 Server URL
      });

      // 文件上传函数
      function uploadFile(fileInput) {
        if (fileInput.files.length > 0) {
          // 遍历所有选择的文件
          Array.from(fileInput.files).forEach((file) => {
            // 检查文件大小（20MB）
            if (file.size <= 20 * 1024 * 1024) {
              // 创建 LeanCloud File 对象
              const leanFile = new AV.File(file.name, file);

              // 保存文件到 LeanCloud
              leanFile
                .save()
                .then((file) => {
                  console.log(`File uploaded successfully: ${file.url()}`);
                })
                .catch((error) => {
                  alert(`Error uploading file: ${error}`);
                });
            } else {
              alert(`${file.name} is too large. Limit is 20MB.`);
            }
          });
        }
      }

      // 手动触发文件选择框
      function triggerFileInput() {
        document.getElementById("file-input").click();
      }
    </script>
  </head>
  <body>
    <h1>上传至github仓库</h1>
    <div class="upload-container">
      <label for="file-input" class="custom-file-upload"> 选择文件 </label>
      <input type="file" id="file-input" onchange="uploadFile(this)" multiple />
    </div>
  </body>
</html>
